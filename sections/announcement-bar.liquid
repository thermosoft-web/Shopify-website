{%- if section.settings.announcement_bar -%}
	{%- liquid
		assign color_announcement_bar_text = settings.color_announcement_bar_text
		assign color_announcement_bar_bg = settings.color_announcement_bar_bg

		assign announcement_bar_layout = section.settings.announcement_bar_layout
		assign speed = section.settings.speed
		assign direction = section.settings.direction
		assign use_block_colors = section.settings.use_block_colors
		assign autoplay = section.settings.autoplay

		assign show_announcement_bar = true

		if autoplay
			assign autoplay = section.settings.autoplay_length | times: 1000
		endif

		if section.settings.announcement_bar_homepage_only
			if template == 'index'
				assign show_announcement_bar = true
			else
				assign show_announcement_bar = false
			endif
		endif

		if announcement_bar_layout == 'carousel' and use_block_colors
			assign color_announcement_bar_text = section.blocks[0].settings.color_text
			assign color_announcement_bar_bg = section.blocks[0].settings.color_bg
		endif
	-%}
	{%- if show_announcement_bar -%}
		{{- 'announcement-bar.css' | asset_url | stylesheet_tag -}}
		<div class="announcement-bar" style="--color-announcement-bar-text: {{ color_announcement_bar_text }}; --color-announcement-bar-bg: {{ color_announcement_bar_bg -}};">
			<div class="announcement-bar--inner direction-{{ direction }} announcement-bar--{{ announcement_bar_layout }}" style="--marquee-speed: {{ speed }}">
				{%- if announcement_bar_layout == 'marquee' -%}
					{%- capture scrolling_text -%}
					<div>
						{%- for block in section.blocks -%}
							<div class="announcement-bar--item" {{ block.shopify_attributes }}>
								{%- if block.settings.link -%}
									<a href="{{ block.settings.link }}" target="_blank">
									<modal-opener class="" data-modal="#ProductPopup-announcement">
									<button class="contact-member-button-link" type="button" aria-haspopup="dialog">
										<div class="body-extra-small">Learn more >></div>
									</button>
									</modal-opener>  	
								{%- endif -%}
								{%- if block.settings.icon -%}{% render 'svg-icons-inline', icon: block.settings.icon %}{%- endif -%}{{- block.settings.text -}}
								<modal-opener class="" data-modal="#ProductPopup-announcement">
									<button class="contact-member-button-link" type="button" aria-haspopup="dialog">
										<div class="body-extra-small">Learn more >></div>
									</button>
									</modal-opener> 
								{%- if block.settings.link -%}
									</a>
								{%- endif -%}
							</div>
						{%- endfor -%}
					</div>
					{%- endcapture -%}
					{{ scrolling_text }}{{ scrolling_text }}{{ scrolling_text }}
				{%- elsif announcement_bar_layout == 'carousel' -%}
					<slide-show class="carousel announcement-bar--use-colors-{{ use_block_colors }}" data-autoplay="{{ autoplay }}">
						{%- for block in section.blocks -%}
							<div class="announcement-bar--item carousel__slide" data-color="{{ block.settings.color_text }}" data-bg="{{ block.settings.color_bg }}" {{ block.shopify_attributes }}>
								{%- if block.settings.link -%}
									<a href="{{ block.settings.link }}" target="_blank">
									<modal-opener class="" data-modal="#ProductPopup-announcement">
									<button class="contact-member-button-link" type="button" aria-haspopup="dialog">
										<div class="body-extra-small">Learn more >></div>
									</button>
									</modal-opener> 	
								{%- endif -%}
								{%- if block.settings.icon -%}{% render 'svg-icons-inline', icon: block.settings.icon %}{%- endif -%}{{- block.settings.text -}}
								{% comment %} <modal-opener class="" data-modal="#ProductPopup-announcement">
									<button class="contact-member-button-link" type="button" aria-haspopup="dialog">
										<div class="body-extra-small">Learn more >></div>
									</button>
									</modal-opener>  {% endcomment %}
								{%- if block.settings.link -%}
									</a>
								{%- endif -%}
							</div>
						{%- endfor -%}
						{%- if section.blocks.size > 1 -%}
						<div class="flickity-nav flickity-prev" tabindex="0">{% render 'svg-icons' with 'thb-caret-left' %}</div>
						<div class="flickity-nav flickity-next" tabindex="0">{% render 'svg-icons' with 'thb-caret-right' %}</div>
						{%- endif -%}
					</slide-show>
				{%- endif -%}
			</div>
		</div>
	{%- endif -%}
{%- endif -%}


 <modal-dialog id="ProductPopup-announcement" class="product-popup-modal">
      <div role="dialog" aria-label="{{ block.settings.title }}" aria-modal="true" class="product-popup-modal__content" tabindex="-1">
        <button id="ModalClose-desktop-{{ block.id }}" type="button" class="product-popup-modal__toggle" aria-label="{{ 'accessibility.close' | t }}">{% render 'svg-icons' with 'close' %}</button>
        <scroll-shadow>
          <div class="product-popup-modal__content-info">										
            <div class="talk-us">
              <div class="talk-contact-full">
                <div class="talk-contact-form" id="talkPopup">
                  <div class="align-center-announc">
                    <div class="small-12 contact-form--form-column">
						<div class="dv-modals-content">
							<svg class="announc-svg-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 420 167"><mask id="a" fill="#fff"><path d="M0 .36h63.96v72.93H0z" fill-rule="evenodd"/></mask><mask id="b" fill="#fff"><path d="M0 167h418.53V0H0z" fill-rule="evenodd"/></mask><g fill="none" fill-rule="evenodd"><path d="M0 0h420v167H0z" fill="#fff"/><g fill="#060809"><path d="M27.45 58.9c-5.18 0-7.76-2.53-7.76-6.74 0-7.77 8.7-10.43 24.59-12.11 0 10.4-7.04 18.86-16.83 18.86M34.29.36c-11.34 0-24.4 5.35-31.5 11L9.28 25c5.69-5.2 14.88-9.65 23.18-9.65 7.87 0 12.23 2.64 12.23 7.93 0 3.58-2.89 5.38-8.35 6.09C15.98 32.01 0 37.63 0 53.32 0 65.77 8.86 73.3 22.7 73.3c9.88 0 18.67-5.5 22.86-12.74v10.7h18.4V26.42C63.96 7.88 51.1.36 34.3.36" mask="url(#a)" transform="translate(0 93.7)"/><path d="M219.14 96.09v68.88h19.71V131.8c0-15.78 9.55-20.41 16.2-20.41 2.6 0 6.11.75 8.43 2.48l3.6-18.2a22.5 22.5 0 00-8.84-1.6c-10.13 0-16.5 4.5-20.7 13.6V96.1zM358.42 94.07c-10.42 0-18.2 6.16-22.26 12.1-3.77-7.68-11.75-12.1-21.3-12.1-10.41 0-17.62 5.79-20.95 12.44V96.09h-19v68.89h19.72v-35.46c0-12.74 6.66-18.84 12.89-18.84 5.63 0 10.8 3.65 10.8 13.05v41.25h19.7v-35.46c0-12.88 6.5-18.84 13.02-18.84 5.2 0 10.7 3.79 10.7 12.9v41.4h19.68v-47.62c0-15.48-10.41-23.3-23-23.3M171.18 96.09h-17.85v-7c0-9.12 5.2-11.73 9.7-11.73 4.95 0 8.81 2.2 8.81 2.2l6.08-13.89s-6.16-4.02-17.36-4.02c-12.59 0-26.91 7.1-26.91 29.37v5.07h-29.89v-7c0-9.12 5.2-11.73 9.69-11.73 2.55 0 5.98.6 8.82 2.2l6.08-13.89c-3.63-2.13-9.46-4.02-17.36-4.02-12.59 0-26.91 7.1-26.91 29.37v5.07H72.65v15.2h11.43v53.68h19.68v-53.69h29.89v53.7h19.68v-53.7h17.85z"/><path d="M182.94 164.98h19.67V96.09h-19.67z" mask="url(#b)"/></g><path d="M297.69 0C244.5 0 197.1 36.92 183.66 84.38h19.27c11.24-35.34 49.38-66.37 94.76-66.37 55.16 0 102.82 42 102.82 107.36 0 14.68-1.9 27.91-5.5 39.6h18.7l.2-.64a158.6 158.6 0 004.61-38.96C418.52 52.47 365.4 0 297.7 0" fill="#0fa0ea" mask="url(#b)"/></g></svg>
							<h3>Buy now, pay over time</h3>
							<p class="tagline">For example $22.57/mo. based on a purchase price of $250.00 at 15% APR for 12 months. Rates are between 10-30% APR.</p>
							<div class="announc-card">
							<div class="card">
							  <svg class="small-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-267 469 24 24" enable-background="new -267 469 24 24"><path d="M-252 482.5h-3v-3c0-.6-.4-1-1-1s-1 .4-1 1v4c0 .6.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zM-248 476.9l.7-.7c.4-.4.4-1 0-1.4s-1-.4-1.4 0l-.7.7c-1.3-1-2.9-1.7-4.6-1.9v-1.1h1c.6 0 1-.4 1-1s-.4-1-1-1h-4c-.6 0-1 .4-1 1s.4 1 1 1h1v1.1c-4.5.5-8 4.3-8 8.9 0 5 4 9 9 9s9-4 9-9c0-2.1-.7-4.1-2-5.6zm-7 12.6c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7z"/></svg>
							  <h5>Quick and easy</h5>
							  <p>Enter a few pieces of information for a real-time decision.</p>
							</div>
							<div class="card">
								<svg class="small-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><path d="M11 9h4c.6 0 1-.4 1-1s-.4-1-1-1h-2V6c0-.6-.4-1-1-1s-1 .4-1 1v1c-1.7 0-3 1.3-3 3s1.3 3 3 3h2c.6 0 1 .4 1 1s-.4 1-1 1H9c-.6 0-1 .4-1 1s.4 1 1 1h2v1c0 .6.4 1 1 1s1-.4 1-1v-1c1.7 0 3-1.3 3-3s-1.3-3-3-3h-2c-.6 0-1-.4-1-1s.4-1 1-1z"/><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm0 22C6.5 22 2 17.5 2 12S6.5 2 12 2s10 4.5 10 10-4.5 10-10 10z"/></svg>
								<h5>No hidden fees</h5>
								<p>Know up front what you'll owe, with no hidden costs and no surprises.</p>
							</div>
							</div>
							<h5>Just select 
								<svg class="inline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 420 167"><mask id="a" fill="#fff"><path d="M0 .36h63.96v72.93H0z" fill-rule="evenodd"/></mask><mask id="b" fill="#fff"><path d="M0 167h418.53V0H0z" fill-rule="evenodd"/></mask><g fill="none" fill-rule="evenodd"><path d="M0 0h420v167H0z" fill="#fff"/><g fill="#060809"><path d="M27.45 58.9c-5.18 0-7.76-2.53-7.76-6.74 0-7.77 8.7-10.43 24.59-12.11 0 10.4-7.04 18.86-16.83 18.86M34.29.36c-11.34 0-24.4 5.35-31.5 11L9.28 25c5.69-5.2 14.88-9.65 23.18-9.65 7.87 0 12.23 2.64 12.23 7.93 0 3.58-2.89 5.38-8.35 6.09C15.98 32.01 0 37.63 0 53.32 0 65.77 8.86 73.3 22.7 73.3c9.88 0 18.67-5.5 22.86-12.74v10.7h18.4V26.42C63.96 7.88 51.1.36 34.3.36" mask="url(#a)" transform="translate(0 93.7)"/><path d="M219.14 96.09v68.88h19.71V131.8c0-15.78 9.55-20.41 16.2-20.41 2.6 0 6.11.75 8.43 2.48l3.6-18.2a22.5 22.5 0 00-8.84-1.6c-10.13 0-16.5 4.5-20.7 13.6V96.1zM358.42 94.07c-10.42 0-18.2 6.16-22.26 12.1-3.77-7.68-11.75-12.1-21.3-12.1-10.41 0-17.62 5.79-20.95 12.44V96.09h-19v68.89h19.72v-35.46c0-12.74 6.66-18.84 12.89-18.84 5.63 0 10.8 3.65 10.8 13.05v41.25h19.7v-35.46c0-12.88 6.5-18.84 13.02-18.84 5.2 0 10.7 3.79 10.7 12.9v41.4h19.68v-47.62c0-15.48-10.41-23.3-23-23.3M171.18 96.09h-17.85v-7c0-9.12 5.2-11.73 9.7-11.73 4.95 0 8.81 2.2 8.81 2.2l6.08-13.89s-6.16-4.02-17.36-4.02c-12.59 0-26.91 7.1-26.91 29.37v5.07h-29.89v-7c0-9.12 5.2-11.73 9.69-11.73 2.55 0 5.98.6 8.82 2.2l6.08-13.89c-3.63-2.13-9.46-4.02-17.36-4.02-12.59 0-26.91 7.1-26.91 29.37v5.07H72.65v15.2h11.43v53.68h19.68v-53.69h29.89v53.7h19.68v-53.7h17.85z"/><path d="M182.94 164.98h19.67V96.09h-19.67z" mask="url(#b)"/></g><path d="M297.69 0C244.5 0 197.1 36.92 183.66 84.38h19.27c11.24-35.34 49.38-66.37 94.76-66.37 55.16 0 102.82 42 102.82 107.36 0 14.68-1.9 27.91-5.5 39.6h18.7l.2-.64a158.6 158.6 0 004.61-38.96C418.52 52.47 365.4 0 297.7 0" fill="#0fa0ea" mask="url(#b)"/></g></svg>
								 at checkout.</h5>
							<p>Checking your eligibility won't affect your credit score.</p>
							<hr>
							<p class="disclaimer">Rates are between 10-30% APR. Payment options through Affirm are subject to an eligibility check, may not be available everywhere, and are provided by these lending partners: affirm.com/lenders. Options depend on your purchase amount, and a down payment may be required. Estimated payment amount may exclude taxes and shipping. For licenses and disclosures, including information for New Mexico residents, see affirm.com/licenses. CA residents: Loans by Affirm Loan Services, LLC are made or arranged pursuant to a California Finance Lender license.</p><p id="offer"><b>APR Promotion offer is valid only for Website orders and cannot be combined with other promotions and discounts.</b></p>
						</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </scroll-shadow>
      </div>
    </modal-dialog>

	<script src="{{ 'modal-dialog.js' | asset_url }}" defer="defer"></script>
{% schema %}
{
	"name": "Announcement bar",
	"class": "announcement-bar-section",
	"max_blocks": 5,
	"settings": [
		{
			"type": "checkbox",
			"id": "announcement_bar",
			"label": "Enable announcement bar",
			"default": true
		},
		{
			"type": "checkbox",
			"id": "announcement_bar_homepage_only",
			"label": "Show on home page only",
			"default": false
		},
		{
			"type": "select",
			"id": "announcement_bar_layout",
			"options": [
				{
					"value": "marquee",
					"label": "Marquee"
				},
				{
					"value": "carousel",
					"label": "Carousel"
				}
			],
			"default": "carousel",
			"label": "Layout"
		},
		{
			"type": "header",
			"content": "Marquee"
		},
		{
			"type": "select",
			"id": "direction",
			"options": [
				{
					"value": "left",
					"label": "Left"
				},
				{
					"value": "right",
					"label": "Right"
				}
			],
			"default": "left",
			"label": "Direction"
		},
		{
			"type": "select",
			"id": "speed",
			"options": [
				{
					"value": "10s",
					"label": "Fast"
				},
				{
					"value": "20s",
					"label": "Normal"
				},
				{
					"value": "30s",
					"label": "Slow"
				},
				{
					"value": "50s",
					"label": "Very slow"
				}
			],
			"default": "20s",
			"label": "Speed"
		},
		{
			"type": "header",
			"content": "Carousel"
		},
		{
			"type": "checkbox",
			"id": "use_block_colors",
			"label": "Use block colors",
			"default": false
		},
		{
			"type": "checkbox",
			"id": "autoplay",
			"label": "Auto-rotate slides",
			"default": true
		},
		{
			"type": "range",
			"id": "autoplay_length",
			"min": 3,
			"max": 10,
			"step": 1,
			"unit": "s",
			"label": "Change slides every",
			"default": 5
		}
	],
	"blocks": [
		{
			"type": "text",
			"name": "Text",
			"settings": [
				{
					"type": "select",
					"id": "icon",
					"options": [
						{
							"value": "none",
							"label": "None"
						},
						{
							"value": "apple",
							"label": "Apple"
						},
						{
							"value": "banana",
							"label": "Banana"
						},
						{
							"value": "bottle",
							"label": "Bottle"
						},
						{
							"value": "box",
							"label": "Box"
						},
						{
							"value": "carrot",
							"label": "Carrot"
						},
						{
							"value": "chat_bubble",
							"label": "Chat bubble"
						},
						{
							"value": "check_mark",
							"label": "Check mark"
						},
						{
							"value": "clipboard",
							"label": "Clipboard"
						},
						{
							"value": "dairy",
							"label": "Dairy"
						},
						{
							"value": "dairy_free",
							"label": "Dairy free"
						},
						{
							"value": "dryer",
							"label": "Dryer"
						},
						{
							"value": "eye",
							"label": "Eye"
						},
						{
							"value": "fire",
							"label": "Fire"
						},
						{
							"value": "gluten_free",
							"label": "Gluten free"
						},
						{
							"value": "heart",
							"label": "Heart"
						},
						{
							"value": "iron",
							"label": "Iron"
						},
						{
							"value": "leaf",
							"label": "Leaf"
						},
						{
							"value": "leather",
							"label": "Leather"
						},
						{
							"value": "lightning_bolt",
							"label": "Lightning bolt"
						},
						{
							"value": "lipstick",
							"label": "Lipstick"
						},
						{
							"value": "lock",
							"label": "Lock"
						},
						{
							"value": "map_pin",
							"label": "Map pin"
						},
						{
							"value": "nut_free",
							"label": "Nut free"
						},
						{
							"value": "pants",
							"label": "Pants"
						},
						{
							"value": "paw_print",
							"label": "Paw print"
						},
						{
							"value": "pepper",
							"label": "Pepper"
						},
						{
							"value": "perfume",
							"label": "Perfume"
						},
						{
							"value": "plane",
							"label": "Plane"
						},
						{
							"value": "plant",
							"label": "Plant"
						},
						{
							"value": "price_tag",
							"label": "Price tag"
						},
						{
							"value": "question_mark",
							"label": "Question mark"
						},
						{
							"value": "recycle",
							"label": "Recycle"
						},
						{
							"value": "return",
							"label": "Return"
						},
						{
							"value": "ruler",
							"label": "Ruler"
						},
						{
							"value": "serving_dish",
							"label": "Serving dish"
						},
						{
							"value": "shirt",
							"label": "Shirt"
						},
						{
							"value": "shoe",
							"label": "Shoe"
						},
						{
							"value": "silhouette",
							"label": "Silhouette"
						},
						{
							"value": "snowflake",
							"label": "Snowflake"
						},
						{
							"value": "star",
							"label": "Star"
						},
						{
							"value": "stopwatch",
							"label": "Stopwatch"
						},
						{
							"value": "truck",
							"label": "Truck"
						},
						{
							"value": "washing",
							"label": "Washing"
						}
					],
					"default": "none",
					"label": "Icon"
				},
				{
					"type": "text",
					"id": "text",
					"label": "Content",
					"default": "Add campaign text here."
				},
				{
					"id": "link",
					"type": "url",
					"label": "Link"
				},
				{
	        "type": "header",
	        "content": "Colors",
					"info": "Used on carousel layout"
	      },
	      {
	        "type": "color",
	        "id": "color_bg",
	        "label": "Background",
	        "default": "#3F72E5"
	      },
	      {
	        "type": "color",
	        "id": "color_text",
	        "label": "Text",
	        "default": "#FFFFFF"
	      }
			]
		}
	],
  "default": {
    "blocks": [
      {
        "type": "text"
      },
			{
        "type": "text"
      },
			{
        "type": "text"
      }
    ]
  }
}
{% endschema %}
