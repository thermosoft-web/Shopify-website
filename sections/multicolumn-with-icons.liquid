{{- 'multicolumn-with-icons.css' | asset_url | stylesheet_tag -}}
{%- liquid
	assign section_heading = section.settings.heading
	assign marker_style = section.settings.marker_style
	assign section_description = section.settings.description
	assign columns_desktop = section.settings.columns_desktop
	assign heading_size = section.settings.heading_size
	assign text_alignment = section.settings.text_alignment

	assign color_heading = section.settings.color_heading
	assign marker_color = section.settings.marker_color
	assign color_text = section.settings.color_text
	assign color_links = section.settings.color_links
	assign image_bg = section.settings.image_bg
	assign image_inner_bg = section.settings.image_inner_bg

	assign desktop_spacing_top = section.settings.desktop_spacing_top
  assign desktop_spacing_bottom = section.settings.desktop_spacing_bottom
  assign mobile_spacing_top = section.settings.mobile_spacing_top
  assign mobile_spacing_bottom = section.settings.mobile_spacing_bottom
  assign disable_top_spacing = section.settings.disable_top_spacing
  assign disable_bottom_spacing = section.settings.disable_bottom_spacing

-%}

{% style %}
#shopify-section-{{ section.id }} {
  --section-spacing-mobile-top: {{ mobile_spacing_top | default: '15' | append: 'px' }};
  --section-spacing-mobile-bottom: {{ mobile_spacing_bottom | default: '15' | append: 'px' }};
  --section-spacing-desktop-top: {{ desktop_spacing_top | default: '30' | append: 'px' }};
  --section-spacing-desktop-bottom: {{ desktop_spacing_bottom | default: '30' | append: 'px' }};
}
{% endstyle %}

<div class="multicolumn-with-icons section-spacing{% if disable_top_spacing %} section-spacing--disable-top{% endif %}{% if disable_bottom_spacing %} section-spacing--disable-bottom{% endif %} text-alignment--{{ text_alignment }}" style="--color-heading: {{ color_heading }}; --color-text: {{ color_text }}; --color-accent: {{ color_links }}; --color-accent-rgb: {{ color_links.rgb | replace: ' ' , ',' }}; --image-bg: {{ image_bg }}; --image-inner-bg: {{ image_inner_bg }};">
	<div class="row">
		<div class="small-12 columns">
			{% render 'section-header', section_heading: section_heading, section_description: section_description, marker_color: marker_color, marker_style: marker_style %}
			<div class="multicolumn-with-icons__inner text-{{ text_alignment }}" style="--multicolumn-columns: {{ columns_desktop }};">
        {%- for block in section.blocks -%}
          <div class="multicolumn-with-icons__column" {{ block.shopify_attributes }}>
            {% if block.settings.image != blank %}
              {%- liquid
                assign ratio = 1
              -%}
              <div class="multicolumn-with-icons__image_bg">
                <figure class="multicolumn-with-icons__image">
                  <div class="multicolumn-with-icons__image--inner aspect-ratio aspect-ratio--square" style="--ratio-percent: {{ 1 | divided_by: ratio | times: 100 }}%;">
                    {%- render 'responsive-image', image: block.settings.image, sizes: '80x0,160x0,240x0,320x0' -%}
                  </div>
                </figure>
              </div>
            {% endif %}
            {% if block.settings.title != blank %}
              <h4 class="{{ heading_size }}">{{ block.settings.title | newline_to_br }}</h4>
            {% endif %}
            {% if block.settings.text != blank %}
              <div class="rte" {{ block.shopify_attributes }}>{{ block.settings.text }}</div>
            {% endif %}
            {% if block.settings.link_label != blank %}
              {% render 'text-button', url: block.settings.link, title: block.settings.link_label %}
            {% endif %}
          </div>
        {%- endfor -%}
			</div>
		</div>
	</div>
</div>
{% schema %}
  {
    "name": "Multicolumn with icons",
		"class": "section-multicolumn-with-icons",
    "settings": [
			{
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Multicolumn",
				"info": "Wrap your text between | to add animated markers. For example: Animated |marker| will underline marker text."
      },
			{
				"type": "select",
				"id": "marker_style",
				"options": [
					{
						"value": "style1",
						"label": "Basic"
					},
					{
						"value": "style2",
						"label": "Double"
					},
					{
						"value": "style3",
						"label": "Squiggle"
					},
					{
						"value": "style4",
						"label": "Zigzag"
					}
				],
				"default": "style1",
				"label": "Marker"
			},
      {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p>Add a short description for this section</p>"
      },

			{
	      "type": "range",
	      "id": "columns_desktop",
	      "min": 1,
	      "max": 3,
	      "step": 1,
	      "default": 3,
	      "label": "Number of columns on desktop"
	    },
			{
	      "type": "select",
	      "id": "text_alignment",
	      "options": [
	        {
	          "value": "left",
	          "label": "Left"
	        },
	        {
	          "value": "center",
	          "label": "Center"
	        },
	        {
	          "value": "right",
	          "label": "Right"
	        }
	      ],
	      "default": "left",
	      "label": "Content alignment"
	    },
			{
				"type": "select",
				"id": "heading_size",
				"label": "Content heading size",
				"options": [
					{
						"value": "h3",
						"label": "Extra Large"
					},
					{
						"value": "h4",
						"label": "Large"
					},
					{
						"value": "h5",
						"label": "Medium"
					},
					{
						"value": "h6",
						"label": "Small"
					}
				],
				"default": "h5"
			},
			{
	      "type": "header",
	      "content": "Colors"
	    },
			{
        "type": "color",
        "id": "color_heading",
        "label": "Heading",
        "default": "#1a1c1d"
      },
			{
				"type": "color",
				"id": "marker_color",
				"label": "Marker",
				"default": "#FD6262"
			},

			{
        "type": "color",
        "id": "color_text",
        "label": "Text",
        "default": "#2c2d2e"
      },
			{
        "type": "color",
        "id": "color_links",
        "label": "Links",
        "default": "#2c2d2e"
      },
			{
        "type": "color",
        "id": "image_bg",
        "label": "Image background",
        "default": "#2c2d2e"
      },
      {
        "type": "color",
        "id": "image_inner_bg",
        "label": "Image inner background",
        "default": "#FFFFFF"
      },
			{
        "type": "header",
        "content": "Spacing"
      },
      {
        "type": "checkbox",
        "id": "disable_top_spacing",
        "default": false,
        "label": "Remove top spacing"
      },
      {
        "type": "checkbox",
        "id": "disable_bottom_spacing",
        "default": false,
        "label": "Remove bottom spacing"
      },
      {
        "type": "header",
        "content": "Desktop spacing"
      },
      {
        "type": "range",
        "id": "desktop_spacing_top",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "Desktop spacing top",
        "default": 30,
        "info": "Changes the section top spacing in desktop screens."
      },
      {
        "type": "range",
        "id": "desktop_spacing_bottom",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "Desktop spacing bottom",
        "default": 30,
        "info": "Changes the section bottom spacing in desktop screens."
      },
      {
        "type": "header",
        "content": "Mobile spacing"
      },
      {
        "type": "range",
        "id": "mobile_spacing_top",
        "min": 0,
        "max": 50,
        "step": 5,
        "unit": "px",
        "label": "Mobile spacing top",
        "default": 15,
        "info": "Changes the section top spacing in mobile screens."
      },
      {
        "type": "range",
        "id": "mobile_spacing_bottom",
        "min": 0,
        "max": 50,
        "step": 5,
        "unit": "px",
        "label": "Mobile spacing bottom",
        "default": 15,
        "info": "Changes the section bottom spacing in mobile screens."
      }
    ],
    "blocks": [
      {
        "type": "column",
        "name": "Column",
        "settings": [
					{
						"type": "image_picker",
						"id": "image",
						"label": "Image",
						"info": "80 x 80 .svg recommended."
					},
					{
						"type": "text",
						"id": "title",
						"default": "Column",
						"label": "Heading"
					},
					{
						"type": "richtext",
						"id": "text",
						"default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
						"label": "Description"
					},
	        {
	          "type": "text",
	          "id": "link_label",
	          "label": "Link label"
	        },
	        {
	          "type": "url",
	          "id": "link",
	          "label": "Link"
	        }
        ]
      }
    ],
    "presets": [
      {
        "name": "Multicolumn with icons",
				"blocks": [
	        {
	          "type": "column"
	        },
	        {
	          "type": "column"
	        },
	        {
	          "type": "column"
	        },
	        {
	          "type": "column"
	        }
	      ]
      }
    ],
		"enabled_on": {
			"templates": ["*"],
			"groups": [
				"header", "footer"
			]
		}
  }
{% endschema %}
