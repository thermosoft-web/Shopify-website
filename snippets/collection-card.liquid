{{ 'heating-systems-grid.css' | asset_url | stylesheet_tag }}

{%- liquid
	assign grid_collection_image = nil
	assign index_c = index | modulo: 4 | plus: 1
-%}
{%- if grid_collection == empty -%}
	{%- assign grid_collection_url = '#' -%}
	{%- assign grid_collection_title = 'onboarding.collection_title' | t -%}
{%- else -%}
	{%- assign grid_collection_url = grid_collection.url -%}
	{%- assign grid_collection_title = grid_collection.title -%}
	{%- assign grid_collection_description = grid_collection.description -%}
	{%- if grid_collection.featured_image -%}
		{%- assign grid_collection_image = grid_collection.featured_image -%}
	{%- endif -%}
{%- endif -%}
{%- liquid
	assign sizes = '345x345,640x640'
	assign media_aspect_percentage = 100 | append: '%'
  if media_aspect_ratio == 'portrait'
    assign sizes = '345x400,640x800'
  elsif media_aspect_ratio == 'adapt'
    assign sizes = '345x0,640x0'
		assign media_aspect_percentage = 100 | divided_by: grid_collection_image.aspect_ratio | append: '%'
  endif

	assign mobile_columns_class = 'small-12'
	if is_carousel
		if columns_mobile == '2'
			assign mobile_columns_class = 'small-6'
		endif
		assign columns_class = 'medium-6 large-4'
		case columns_desktop
			when 2
				assign columns_class = 'medium-6'
			when 3
				assign columns_class = 'medium-4'
			when 4
				assign columns_class = 'medium-6 large-3'
			when 5
				assign columns_class = 'medium-1/5 large-1/5'
			when 6
				assign columns_class = 'medium-3 large-2'
		endcase
		assign columns_class = columns_class | append: ' carousel__slide columns'
	endif

	if settings.block_shadows
		assign collection_card_shadow_class = 'collection-card--has-shadow'
	endif
	assign collection_image_shadow_class = 'has-shadow--true'
-%}
<div class="{{ mobile_columns_class }} {{ columns_class }}">
	<div class="heating-systems-inner {{ style }} {{ collection_card_shadow_class }} text-{{ text_alignment }}">
				{% if grid_collection == empty %}
					<div class="thb-placeholder">{{ 'collection-apparel-' | append: index_c | placeholder_svg_tag }}</div>
				{% else %}
					{% if grid_collection_image %}
						{% comment %} {%- render 'responsive-image', image: grid_collection.featured_image | image_url, sizes: sizes -%} {% endcomment %}
						 <figure>    
							<a href="{{ grid_collection_url }}"> 
							{%- liquid
								assign image = grid_collection_image
								assign master_width = image.src.width | append: 'x' | append: image.src.height
								render 'responsive-image', image: image, sizes: master_width, retina: false, alt: grid_collection_title
							-%}
							</a>           
						</figure>
					{% else %}
						<div class="thb-placeholder">{{ 'collection-apparel-' | append: index_c | placeholder_svg_tag }}</div>
					{% endif %}
				{% endif %}
		<div class="heating-systems-content">
			{% comment %} <a href="{{ grid_collection_url }}" class="collection-card--link collection-card--link-{{ heading_size }} collection-card--link-{{ heading_position }}" title="{{ grid_collection_title | escape }}"><span>{{ grid_collection_title }}</span></a> {% endcomment %}
			{% if grid_collection_title != blank %} <div class="title body-small">{{ grid_collection_title }}</div> {% endif %}
			{% if grid_collection_description != blank %} <div class="rte body-extra-small">{{ grid_collection_description | strip_html }}</div> {% endif %}
			<div class="heating-systems-button">
				<button class="read-more-btn">Read more</button>
				<a href="{{ grid_collection_url }}" class="button shop_button small" aria-label="{{ grid_collection_title }}">Shop</a>
			</div>
		</div>
	</div>
</div>
